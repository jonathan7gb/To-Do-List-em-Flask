{% extends 'base.html' %}

{% include 'header.html' %}

{% block content %}

<section class="pagina">

    <section class="visualizar">
        <h2 class="title mt-5">Lista de Tarefas</h2>

        
        <form action="" method="get" class="formulario-pesquisa">
            <input type="text" name="pesquisa2" class="tarefa-search" placeholder="üîç  Pesquisar Tarefa" value="{{ pesquisa2 }}" autofocus>
            <button type="submit" class="btn-pesquisa">Pesquisar</button>
        </form>

        <form action="" method="get" class="filtros-pesquisa">
           <select name="ordenar" id="select-ordenar" class="select-ordenar">
                <option disabled {% if not ordenar %}selected{% endif %}>Ordenar</option>
                <option value="data_desc" {% if ordenar == 'data_desc' %}selected{% endif %}>Data de Envio (Mais Recente)</option>
                <option value="data_asc" {% if ordenar == 'data_asc' %}selected{% endif %}>Data de Envio (Mais Antigo)</option>
                <option value="titulo_az" {% if ordenar == 'titulo_az' %}selected{% endif %}>T√≠tulo (A-Z)</option>
                <option value="titulo_za" {% if ordenar == 'titulo_za' %}selected{% endif %}>T√≠tulo (Z-A)</option>
            </select>

            <select name="status" id="select-status2" class="select-status2">
                <option disabled {% if not status %}selected{% endif %}>Status</option>
                <option value="Todos" {% if status == 'Todos' %}selected{% endif %}>Todos</option>
                <option value="a_fazer" {% if status == 'a_fazer' %}selected{% endif %}>A Fazer</option>
                <option value="em_andamento" {% if status == 'em_andamento' %}selected{% endif %}>Em Andamento</option>
                <option value="concluido" {% if status == 'concluido' %}selected{% endif %}>Conclu√≠do</option>
            </select>
            <button type="submit" class="btn-filtro">Aplicar Filtros</button>
        </form>

        <div class="container-list">
            
                {% for linha in context2.dados2 %}
                        <div class="card">
                            <h3>{{ linha.titulo }}</h3>
                            <hr class="linha-card">
                            <p><strong>Descri√ß√£o:</strong> {{ linha.descricao }}</p>
                            <p><strong>Status:</strong> {{ status_dict2[linha.status] }}</p>
                            <p><strong>Data de Cria√ß√£o:</strong> {{ linha.data_envio.strftime('%d/%m/%Y %H:%M') }}</p>
                        </div>          
                {% endfor %}

        </div>
    </section>

</section>

{% include 'footer.html' %}

{% endblock %}
